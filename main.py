import streamlit as st

st.set_page_config(page_title="MBTI 모둠 & 자유 탐구 주제 추천", page_icon="🔬")

st.title("🔬 MBTI 기반 모둠 & 자유 탐구 주제 추천")
st.subheader("이름과 MBTI 선택 후, 주제를 클릭하면 탐구 계획서 초안이 나와요! 🧪✨")

name = st.text_input("이름을 입력하세요 ✍️")

# 모둠별 정보 + 테이블 번호까지 추가
group_info = {
    "INTP": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], 1, [
        "🔦 빛의 반사와 굴절 실험 설계하기",
        "🧠 자기장 속 전류의 방향 실험",
        "⚙️ 중력과 마찰력 비교 실험"
    ]),
    "INTJ": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], 1, [
        "🔋 전기 회로의 직렬·병렬 연결 실험하기",
        "📏 빛의 경로 추적 실험",
        "📐 수평면에서의 등속 직선 운동 실험"
    ]),
    "ENTP": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], 1, [
        "🧲 자석과 자기장 실험 키트 만들기",
        "🔍 렌즈의 초점 거리 측정 실험",
        "🪐 지구의 자전과 낮밤 변화 모형 만들기"
    ]),
    "ENTJ": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], 1, [
        "⚡ 정전기와 도체의 관계 실험하기",
        "🔌 전지 개수에 따른 전류 세기 측정",
        "📡 파동의 간섭 현상 실험"
    ]),
    "INFJ": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], 2, [
        "🌍 기후 변화가 생물 다양성에 미치는 영향 조사",
        "🌳 나무의 나이테와 기후 변화 분석",
        "🌡️ 지구 온난화 시뮬레이션 실험"
    ]),
    "INFP": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], 2, [
        "🌱 식물의 광합성 속도에 영향을 주는 요인 실험",
        "🌸 다른 식물의 발아 조건 비교 실험",
        "🧬 유전 형질의 간단한 모형 만들기"
    ]),
    "ENFP": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], 2, [
        "☀️ 태양의 고도 변화와 그림자의 길이 관계 실험",
        "🌏 계절 변화와 지구 공전의 관계 조사",
        "🌈 스펙트럼 실험을 통한 빛의 구성 색 이해"
    ]),
    "ENFJ": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], 2, [
        "🌊 해수면 상승이 생태계에 미치는 영향 영상 제작",
        "🪸 산호초 감소와 해양 생태계 변화",
        "💨 대기오염 측정과 해결 방안 조사"
    ]),
    "ISTJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], 3, [
        "💧 물의 상태 변화 실험: 응결과 증발 관찰",
        "🧊 얼음이 녹는 시간 비교 실험",
        "📦 다양한 포장재의 단열 효과 비교"
    ]),
    "ISFJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], 3, [
        "🧫 세균 번식 조건 실험하기 (깨끗한 손의 중요성)",
        "🔍 현미경으로 관찰한 생물 세포 비교",
        "🥼 손 씻기의 효과 실험"
    ]),
    "ESTJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], 3, [
        "🍽️ 화학 변화와 물리 변화 구분 실험",
        "🧪 산과 염기의 성질 비교 실험",
        "📊 다양한 액체의 밀도 비교"
    ]),
    "ESFJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], 3, [
        "🥶 냉장고 속 기체의 응축 실험",
        "🧂 소금물의 끓는점 변화 실험",
        "🔥 연소의 3요소 실험"
    ]),
    "ISTP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], 4, [
        "✈️ 양력 실험: 종이비행기와 비행 원리",
        "🏀 낙하 속도 실험: 물체의 질량과 속도 관계",
        "🧱 간단한 지렛대 실험"
    ]),
    "ISFP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], 4, [
        "🎨 빛과 색의 혼합 실험 (RGB/CMY)",
        "🔮 유리 프리즘을 이용한 색 분해 실험",
        "🧼 비누방울의 색과 간섭 현상 실험"
    ]),
    "ESTP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], 4, [
        "🎢 속력과 가속도 실험: 미끄럼틀 실험 장치 만들기",
        "🛹 마찰력의 크기 비교 실험",
        "⚖️ 도르래의 원리 실험"
    ]),
    "ESFP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], 4, [
        "🎥 소리의 진동 실험: 스피커 위의 소금 영상 만들기",
        "🎶 소리의 세기와 진동수 비교 실험",
        "📢 공기의 진동 실험"
    ]),
}

plan_templates = {
    "🔦 빛의 반사와 굴절 실험 설계하기": """\
### 탐구 주제: 빛의 반사와 굴절 실험 설계하기

1. 탐구 동기 및 목적  
- 빛이 어떻게 반사되고 굴절되는지 이해하고 싶다.

2. 탐구 문제  
- 빛은 어떤 각도로 반사되고 굴절되는가?

3. 탐구 가설  
- 빛은 입사각과 반사각이 같고, 굴절률에 따라 꺾인다.

4. 실험 방법 및 절차  
- 빛을 투명한 매질에 쏘고, 반사각과 굴절각을 측정한다.

5. 예상 결과  
- 반사각과 입사각이 같고, 굴절각은 매질에 따라 달라진다.
""",
    "🧠 자기장 속 전류의 방향 실험": """\
### 탐구 주제: 자기장 속 전류의 방향 실험

1. 탐구 동기 및 목적  
- 자기장 내에서 전류가 어떻게 작용하는지 알고 싶다.

2. 탐구 문제  
- 자기장 속 전류의 방향은 어떻게 결정되는가?

3. 탐구 가설  
- 자기장과 전류 방향 사이에 규칙이 있다.

4. 실험 방법 및 절차  
- 전류가 흐르는 도선을 자기장에 넣고 힘의 방향을 확인한다.

5. 예상 결과  
- 전류 방향에 따라 힘의 방향이 달라진다.
""",
    "⚙️ 중력과 마찰력 비교 실험": """\
### 탐구 주제: 중력과 마찰력 비교 실험

1. 탐구 동기 및 목적  
- 중력과 마찰력이 어떻게 작용하는지 알아보고 싶다.

2. 탐구 문제  
- 중력과 마찰력은 어떻게 다르고 어떤 상황에서 작용하는가?

3. 탐구 가설  
- 중력은 항상 아래 방향이고, 마찰력은 접촉면에 따라 다르다.

4. 실험 방법 및 절차  
- 경사면에서 물체를 굴리며 마찰력과 중력의 작용을 비교한다.

5. 예상 결과  
- 마찰력의 크기는 접촉면에 따라 다르다.
""",
        "🪐 지구의 자전과 낮밤 변화 모형 만들기": """\
### 탐구 주제: 지구의 자전과 낮밤 변화 모형 만들기

1. 탐구 동기 및 목적  
- 지구 자전이 낮과 밤의 변화를 어떻게 일으키는지 이해한다.

2. 탐구 문제  
- 지구 자전이 낮과 밤에 미치는 영향은 무엇인가?

3. 탐구 가설  
- 지구가 자전하면서 햇빛이 닿는 부분에 낮이 발생한다.

4. 실험 방법 및 절차  
- 지구 모형을 만들고, 조명으로 햇빛을 비추어 변화 관찰.

5. 예상 결과  
- 모형에서 낮과 밤이 순환되는 현상이 관찰된다.
""",

    # ENTJ
    "⚡ 정전기와 도체의 관계 실험하기": """\
### 탐구 주제: 정전기와 도체의 관계 실험하기

1. 탐구 동기 및 목적  
- 정전기가 도체에서 어떻게 작용하는지 실험으로 확인.

2. 탐구 문제  
- 도체가 정전기를 어떻게 분산시키는가?

3. 탐구 가설  
- 도체는 전하를 쉽게 전달하여 정전기를 분산시킨다.

4. 실험 방법 및 절차  
- 도체와 절연체에 정전기를 발생시키고 반응 관찰.

5. 예상 결과  
- 도체에서는 정전기가 쉽게 사라진다.
""",
    "🔌 전지 개수에 따른 전류 세기 측정": """\
### 탐구 주제: 전지 개수에 따른 전류 세기 측정

1. 탐구 동기 및 목적  
- 전지 개수가 전류에 미치는 영향을 알아본다.

2. 탐구 문제  
- 전지 개수가 많아지면 전류는 어떻게 변하는가?

3. 탐구 가설  
- 전지 개수가 늘어나면 전류 세기가 증가한다.

4. 실험 방법 및 절차  
- 전지 수를 바꿔가며 전류계를 사용해 측정.

5. 예상 결과  
- 전지 수 증가에 따라 전류 세기가 커진다.
""",
    "📡 파동의 간섭 현상 실험": """\
### 탐구 주제: 파동의 간섭 현상 실험

1. 탐구 동기 및 목적  
- 파동이 서로 만나 간섭하는 현상을 이해한다.

2. 탐구 문제  
- 두 파동이 만나면 어떤 간섭 패턴이 생기는가?

3. 탐구 가설  
- 파동은 겹쳐서 강화 또는 상쇄되는 간섭 현상을 보인다.

4. 실험 방법 및 절차  
- 수면파 생성 장치를 이용해 간섭 무늬 관찰.

5. 예상 결과  
- 파동 간섭으로 밝고 어두운 무늬가 나타난다.
""",

    # INFJ
    "🌍 기후 변화가 생물 다양성에 미치는 영향 조사": """\
### 탐구 주제: 기후 변화가 생물 다양성에 미치는 영향 조사

1. 탐구 동기 및 목적  
- 기후 변화가 생태계에 어떤 영향을 미치는지 탐구.

2. 탐구 문제  
- 기후 변화는 생물 다양성에 어떤 변화를 초래하는가?

3. 탐구 가설  
- 기후 변화로 일부 종은 멸종 위험이 증가한다.

4. 실험 방법 및 절차  
- 문헌 조사 및 사례 연구, 데이터 분석 수행.

5. 예상 결과  
- 기후 변화가 생물종 감소와 서식지 변화에 영향.
""",
    "🌳 나무의 나이테와 기후 변화 분석": """\
### 탐구 주제: 나무의 나이테와 기후 변화 분석

1. 탐구 동기 및 목적  
- 나이테를 통해 과거 기후 변화를 추적.

2. 탐구 문제  
- 나무 나이테 두께는 기후 변화와 어떤 관련이 있는가?

3. 탐구 가설  
- 기후가 좋을 때 나이테가 두껍다.

4. 실험 방법 및 절차  
- 나무 표본 채취 및 나이테 측정.

5. 예상 결과  
- 나이테 두께 변화가 기후 변화와 연관됨.
""",
    "🌡️ 지구 온난화 시뮬레이션 실험": """\
### 탐구 주제: 지구 온난화 시뮬레이션 실험

1. 탐구 동기 및 목적  
- 온실효과와 지구 온난화를 모형으로 실험.

2. 탐구 문제  
- 온실가스 농도 증가가 온도에 미치는 영향은?

3. 탐구 가설  
- 온실가스가 많아질수록 온도가 상승한다.

4. 실험 방법 및 절차  
- 밀폐된 공간에 온실가스 농도 변화 후 온도 측정.

5. 예상 결과  
- 온실가스 농도 증가에 따라 온도 상승 관찰.
""",

    # INFP
    "🌱 식물의 광합성 속도에 영향을 주는 요인 실험": """\
### 탐구 주제: 식물의 광합성 속도에 영향을 주는 요인 실험

1. 탐구 동기 및 목적  
- 광합성에 영향을 미치는 환경 요소를 확인.

2. 탐구 문제  
- 빛, 이산화탄소, 온도 중 무엇이 가장 영향력이 큰가?

3. 탐구 가설  
- 빛의 세기가 광합성 속도에 가장 큰 영향을 준다.

4. 실험 방법 및 절차  
- 다양한 빛 조건에서 식물의 산소 발생량 측정.

5. 예상 결과  
- 빛이 강할수록 광합성 속도가 빨라진다.
""",
    "🌸 다른 식물의 발아 조건 비교 실험": """\
### 탐구 주제: 다른 식물의 발아 조건 비교 실험

1. 탐구 동기 및 목적  
- 다양한 식물의 발아 조건 차이를 이해한다.

2. 탐구 문제  
- 온도, 습도, 토양 종류가 발아에 미치는 영향은?

3. 탐구 가설  
- 각 식물별 최적 발아 조건이 다르다.

4. 실험 방법 및 절차  
- 여러 조건에서 다양한 씨앗 발아율 관찰.

5. 예상 결과  
- 조건에 따라 발아율이 달라진다.
""",
    "🧬 유전 형질의 간단한 모형 만들기": """\
### 탐구 주제: 유전 형질의 간단한 모형 만들기

1. 탐구 동기 및 목적  
- 유전과 형질 전달 기본 원리 이해.

2. 탐구 문제  
- 우성과 열성 유전자가 어떻게 작용하는가?

3. 탐구 가설  
- 특정 형질은 우성 유전자에 의해 발현된다.

4. 실험 방법 및 절차  
- 모형 재료로 유전 형질 모형 제작 및 교배 시뮬레이션.

5. 예상 결과  
- 우성 형질이 더 자주 나타난다.
""",

    # ENFP
    "☀️ 태양의 고도 변화와 그림자의 길이 관계 실험": """\
### 탐구 주제: 태양의 고도 변화와 그림자의 길이 관계 실험

1. 탐구 동기 및 목적  
- 태양 고도에 따른 그림자 길이 변화를 분석.

2. 탐구 문제  
- 태양 높이 변화가 그림자 길이에 미치는 영향은?

3. 탐구 가설  
- 태양이 높을수록 그림자가 짧아진다.

4. 실험 방법 및 절차  
- 하루 동안 특정 물체의 그림자 길이 측정.

5. 예상 결과  
- 태양 높이와 그림자 길이의 반비례 관계 확인.
""",
    "🌏 계절 변화와 지구 공전의 관계 조사": """\
### 탐구 주제: 계절 변화와 지구 공전의 관계 조사

1. 탐구 동기 및 목적  
- 계절 변화 원인을 탐구.

2. 탐구 문제  
- 지구 공전과 축 기울기가 계절에 미치는 영향은?

3. 탐구 가설  
- 지구의 공전과 축 기울기가 계절 변화를 만든다.

4. 실험 방법 및 절차  
- 지구 모형과 태양 조명 이용해 계절 시뮬레이션.

5. 예상 결과  
- 계절별 태양 입사각 변화 관찰.
""",
    "🌈 스펙트럼 실험을 통한 빛의 구성 색 이해": """\
### 탐구 주제: 스펙트럼 실험을 통한 빛의 구성 색 이해

1. 탐구 동기 및 목적  
- 빛의 분해와 색 구성 원리 이해.

2. 탐구 문제  
- 빛은 어떤 색으로 구성되어 있는가?

3. 탐구 가설  
- 빛은 여러 가지 색이 혼합되어 있다.

4. 실험 방법 및 절차  
- 프리즘을 이용해 백색광을 분해.

5. 예상 결과  
- 다양한 색으로 빛이 분해됨 확인.
""",
    # ENFJ
    "🌊 해수면 상승이 생태계에 미치는 영향 영상 제작": """\
### 탐구 주제: 해수면 상승이 생태계에 미치는 영향 영상 제작

1. 탐구 동기 및 목적  
- 해수면 상승 문제를 이해하고 알리기 위함.

2. 탐구 문제  
- 해수면 상승은 생태계에 어떤 영향을 미치는가?

3. 탐구 가설  
- 해수면 상승으로 서식지가 감소한다.

4. 실험 방법 및 절차  
- 자료 조사 및 영상 제작.

5. 예상 결과  
- 해수면 상승과 생태계 변화 사례 설명.
""",
    # (나머지 주제도 이렇게 채워 넣으면 됨)
}

# 이름, MBTI 입력받기 및 모둠/테이블 안내
if name:
    mbti = st.selectbox(f"{name}님의 MBTI를 선택하세요", options=list(group_info.keys()))
    
    if mbti:
        group_name, mbti_group, table_number, topics = group_info[mbti]
        
        st.markdown(f"### 안녕하세요, **{name}**님! 당신은 **{group_name}**에 속하며, **{table_number}번 테이블**에 앉으시면 됩니다.")
        st.markdown("#### 아래 주제 중 한 가지를 선택해 탐구 계획서 초안을 확인해보세요!")
        
        for topic in topics:
            if st.button(topic):
                if topic in plan_templates:
                    st.markdown(plan_templates[topic])
                else:
                    st.markdown(f"### {topic}\n\n탐구 계획서 초안이 준비 중입니다. 조금만 기다려 주세요!")
else:
    st.write("이름을 입력해 주세요.")
