import streamlit as st

st.set_page_config(page_title="MBTI 모둠 & 자유 탐구 주제 추천", page_icon="🔬")

st.title("🔬 MBTI 기반 모둠 & 자유 탐구 주제 추천")
st.subheader("이름과 MBTI 선택 후, 주제를 클릭하면 탐구 계획서 초안이 나와요! 🧪✨")

name = st.text_input("이름을 입력하세요 ✍️")

group_info = {
    "INTP": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], [
        "🔦 빛의 반사와 굴절 실험 설계하기",
        "🧠 자기장 속 전류의 방향 실험",
        "⚙️ 중력과 마찰력 비교 실험"
    ]),
    "INTJ": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], [
        "🔋 전기 회로의 직렬·병렬 연결 실험하기",
        "📏 빛의 경로 추적 실험",
        "📐 수평면에서의 등속 직선 운동 실험"
    ]),
    "ENTP": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], [
        "🧲 자석과 자기장 실험 키트 만들기",
        "🔍 렌즈의 초점 거리 측정 실험",
        "🪐 지구의 자전과 낮밤 변화 모형 만들기"
    ]),
    "ENTJ": ("논리파 과학 덕후 모둠 🧠", ["INTP", "INTJ", "ENTP", "ENTJ"], [
        "⚡ 정전기와 도체의 관계 실험하기",
        "🔌 전지 개수에 따른 전류 세기 측정",
        "📡 파동의 간섭 현상 실험"
    ]),
    "INFJ": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], [
        "🌍 기후 변화가 생물 다양성에 미치는 영향 조사",
        "🌳 나무의 나이테와 기후 변화 분석",
        "🌡️ 지구 온난화 시뮬레이션 실험"
    ]),
    "INFP": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], [
        "🌱 식물의 광합성 속도에 영향을 주는 요인 실험",
        "🌸 다른 식물의 발아 조건 비교 실험",
        "🧬 유전 형질의 간단한 모형 만들기"
    ]),
    "ENFP": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], [
        "☀️ 태양의 고도 변화와 그림자의 길이 관계 실험",
        "🌏 계절 변화와 지구 공전의 관계 조사",
        "🌈 스펙트럼 실험을 통한 빛의 구성 색 이해"
    ]),
    "ENFJ": ("이상주의자 상상 모둠 🌌", ["INFJ", "INFP", "ENFP", "ENFJ"], [
        "🌊 해수면 상승이 생태계에 미치는 영향 영상 제작",
        "🪸 산호초 감소와 해양 생태계 변화",
        "💨 대기오염 측정과 해결 방안 조사"
    ]),
    "ISTJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], [
        "💧 물의 상태 변화 실험: 응결과 증발 관찰",
        "🧊 얼음이 녹는 시간 비교 실험",
        "📦 다양한 포장재의 단열 효과 비교"
    ]),
    "ISFJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], [
        "🧫 세균 번식 조건 실험하기 (깨끗한 손의 중요성)",
        "🔍 현미경으로 관찰한 생물 세포 비교",
        "🥼 손 씻기의 효과 실험"
    ]),
    "ESTJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], [
        "🍽️ 화학 변화와 물리 변화 구분 실험",
        "🧪 산과 염기의 성질 비교 실험",
        "📊 다양한 액체의 밀도 비교"
    ]),
    "ESFJ": ("현실 기반 꼼꼼이 모둠 📐", ["ISTJ", "ISFJ", "ESTJ", "ESFJ"], [
        "🥶 냉장고 속 기체의 응축 실험",
        "🧂 소금물의 끓는점 변화 실험",
        "🔥 연소의 3요소 실험"
    ]),
    "ISTP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], [
        "✈️ 양력 실험: 종이비행기와 비행 원리",
        "🏀 낙하 속도 실험: 물체의 질량과 속도 관계",
        "🧱 간단한 지렛대 실험"
    ]),
    "ISFP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], [
        "🎨 빛과 색의 혼합 실험 (RGB/CMY)",
        "🔮 유리 프리즘을 이용한 색 분해 실험",
        "🧼 비누방울의 색과 간섭 현상 실험"
    ]),
    "ESTP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], [
        "🎢 속력과 가속도 실험: 미끄럼틀 실험 장치 만들기",
        "🛹 마찰력의 크기 비교 실험",
        "⚖️ 도르래의 원리 실험"
    ]),
    "ESFP": ("감각형 실험파 모둠 ⚙️", ["ISTP", "ISFP", "ESTP", "ESFP"], [
        "🎥 소리의 진동 실험: 스피커 위의 소금 영상 만들기",
        "🎶 소리의 세기와 진동수 비교 실험",
        "📢 공기의 진동 실험"
    ]),
}

plan_templates = {
    "🔦 빛의 반사와 굴절 실험 설계하기": """\
### 탐구 주제: 빛의 반사와 굴절 실험 설계하기

1. 탐구 동기 및 목적  
- 빛이 어떻게 반사되고 굴절되는지 이해하고 싶다.

2. 탐구 문제  
- 빛은 어떤 각도로 반사되고 굴절되는가?

3. 탐구 가설  
- 빛은 입사각과 반사각이 같고, 굴절률에 따라 꺾인다.

4. 실험 방법 및 절차  
- 빛을 투명한 매질에 쏘고, 반사각과 굴절각을 측정한다.

5. 예상 결과  
- 반사각과 입사각이 같고, 굴절각은 매질에 따라 달라진다.
""",
    "🧠 자기장 속 전류의 방향 실험": """\
### 탐구 주제: 자기장 속 전류의 방향 실험

1. 탐구 동기 및 목적  
- 자기장 내에서 전류가 어떻게 작용하는지 알고 싶다.

2. 탐구 문제  
- 자기장 속 전류의 방향은 어떻게 결정되는가?

3. 탐구 가설  
- 자기장과 전류 방향 사이에 규칙이 있다.

4. 실험 방법 및 절차  
- 전류가 흐르는 도선을 자기장에 넣고 힘의 방향을 확인한다.

5. 예상 결과  
- 전류 방향에 따라 힘의 방향이 달라진다.
""",
    "⚙️ 중력과 마찰력 비교 실험": """\
### 탐구 주제: 중력과 마찰력 비교 실험

1. 탐구 동기 및 목적  
- 중력과 마찰력이 어떻게 작용하는지 알아보고 싶다.

2. 탐구 문제  
- 중력과 마찰력은 어떻게 다르고 어떤 상황에서 작용하는가?

3. 탐구 가설  
- 중력은 항상 아래 방향이고, 마찰력은 접촉면에 따라 다르다.

4. 실험 방법 및 절차  
- 경사면에서 물체를 굴리며 마찰력과 중력의 작용을 비교한다.

5. 예상 결과  
- 마찰력의 크기는 표면에 따라 다르며 중력은 일정하다.
""",
    # ... (다른 주제도 필요하면 여기에 추가하세요)
}

selected_mbti = st.selectbox("당신의 MBTI를 선택하세요 🔽", ["선택하세요"] + list(group_info.keys()))

if name and selected_mbti != "선택하세요":
    group_name, members, topics = group_info[selected_mbti]
    st.success(f"🧬 {name}님은 **{group_name}** 에 속해요!")
    st.markdown(f"👥 **같은 모둠원 유형**: {', '.join(members)}")
    st.markdown("🔎 **추천 자유 탐구 주제 (주제를 클릭해 보세요!)**:")

    selected_topic = st.radio("탐구 주제를 선택하세요:", topics)
    
    if selected_topic:
        st.markdown("### 📝 탐구 계획서 초안")
        plan_text = plan_templates.get(selected_topic, "해당 주제의 탐구 계획서가 준비 중입니다.")
        st.markdown(plan_text)

elif not name:
    st.info("👤 이름을 입력해주세요!")
elif selected_mbti == "선택하세요":
    st.info("🔽 MBTI를 선택해주세요!")
